<%= form_with model: user, url: users_path, local: false, data: { modal_target: "user-modal" }, class: 'vstack gap-2' do |f| %>
<div>
  <label class="form-label small">Email</label>
  <%= f.text_field :email, class: [ 'form-control form-control-sm', (user.errors[:email].present?) ?
  'is-invalid' : nil ].compact.join(' ') %> <% if user.errors[:email].present? %>
  <div class="invalid-feedback d-block"><%= user.errors[:email].uniq.join(', ') %></div>
  <% end %>
</div>

<div>
  <label class="form-label small">Name</label>
  <%= f.text_field :name, class: [ 'form-control form-control-sm', (user.errors[:name].present?) ?
  'is-invalid' : nil ].compact.join(' ') %> <% if user.errors[:name].present? %>
  <div class="invalid-feedback d-block"><%= user.errors[:name].uniq.join(', ') %></div>
  <% end %>
</div>

<div>
  <label class="form-label small">Password</label>
  <%= f.password_field :password, class: [ 'form-control form-control-sm',
  (user.errors[:password].present?) ? 'is-invalid' : nil ].compact.join(' ') %> <% if
  user.errors[:password].present? %>
  <div class="invalid-feedback d-block"><%= user.errors[:password].uniq.join(', ') %></div>
  <% end %>
</div>

<div>
  <label class="form-label small">Password Confirmation</label>
  <%= f.password_field :password_confirmation, class: [ 'form-control form-control-sm',
  (user.errors[:password_confirmation].present? || user.errors[:password].present?) ? 'is-invalid' : nil ].compact.join(' ') %>
  <% if user.errors[:password_confirmation].present? %>
    <div class="invalid-feedback d-block">
      <%= user.errors[:password_confirmation].uniq.join(', ') %>
    </div>
  <% elsif user.errors[:password].present? %>
    <div class="invalid-feedback d-block">
      <%= user.errors[:password].uniq.join(', ') %>
    </div>
  <% end %>
</div>

<div><%= f.submit 'Create', class: 'btn btn-primary btn-sm' %></div>
<% end %>
